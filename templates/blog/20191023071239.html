<h2>昔CGIで掲示板を作った方へ。CGIに代わるPerl Web開発手法のまとめ</h2>

Twitterのタイムライン眺めていると、昔Perl/CGIで掲示板を作ったなぁ、改造したなぁという方が結構な数でいらっしゃいます。

ところで、今のPerlのWeb開発って、どうなっているのという方のために、キーワードを検索すれば調べられるように案内を作成します。

<h3>PerlのWebフレームワーク</h3>

かつては、cgi-lib.pl、CGI.pm、jcode.pl、JCode.pmなどを使って、掲示板を作ったり、Web開発を行っていたと思います。CGI自体は、ひとつの動的なWebを実現する技術ですが、パフォーマンスと開発効率の面で、課題を抱えていました。

現代的なPerlのWebフレームワークは、パフォーマンスと開発効率を改善しています。

PerlのWebフレームワークを五十音順で紹介します。

<ul>
  <li>
    Amon2
  </li>
  <li>
    Catalyst
  </li>
  <li>
    Dancer2
  </li>
  <li>
    Mojolicious
  </li>
  <li>
    Plack/PSGI(Webミドルウェア)
  </li>
</ul>

Amon2, Catalyst, Dancer2, Mojoliciousは、PerlのWebフレームワークです。

Plack/PSGIは、Webミドルウェアで、WebサーバーとWebアプリケーションがコミュニケーションをするための共通仕様を提供します。

詳細は、記述しませんが、検索すれば、たくさんの情報を得ることができると思います。

CGIの課題を解決するためにPHPが利用されることは多いですが、Perl自体もCGIの課題を解決するために独自の手法を発展させてきました。

<h3>Linux環境</h3>

PerlのWebアプリケーションは、UnixかLinuxで動かします。Linuxは無料で始められるので、利用しやすいでしょう。無料で利用できる代表的なLinuxについて、五十音順で紹介します。

<ul>
  <li>CentOS</li>
  <li>Debian</li>
  <li>Fedora</li>
  <li>RedHat</li>
  <li>Ubuntu</li>
</ul>

現在は、WindowsでLinux環境を疑似体験できる方法があります。つまり、Windowsしか持っていなくっても、PerlのWeb開発の環境構築ができるのです。方法を五十音順で紹介します。

<ul>
  <li>msys2</li>
  <li>Cygwin</li>
  <li>Windows Subsystem for Linux</li>
</ul>

msys2は、環境構築の手順が少なく簡単で、動作が軽いので、お勧めしています。Windowsしか持っていない、Linuxを体験してみたいという方は、msys2で入門してみましょう。

<a href="https://tutorial.perlzemi.com/blog/20180806153350.html">msys2をWindowsにインストールしてPerlを使う</a>

<h3>Perlのインストール</h3>

Web開発を始める場合は、Perlのモジュールを使うので、Linux環境に、その環境ローカルで使えるPerlをインストールすることが、お勧めです。

このためのツールを五十音順で紹介します。

<ul>
  <li><a href="https://tutorial.perlzemi.com/blog/20110220130464.html">perlbrew</a></li>
  <li><a href="https://tutorial.perlzemi.com/blog/20180816153437.html">plenv</a></li>
</ul>

<h3>本番環境</h3>

本番環境は、クラウドサービスかVPSサービスを借りて、配置することになります。

<ul>
  <li>AWL</li>
  <li>Microsoft Azure</li>
  <li>さくらのクラウド</li>
  <li>さくらのVPS</li>
</ul>

さくらのVPSは、月額698円で、本物のLinux環境を利用できます。個人で始める方は、こちらが、低額で、お安くて便利です。

企業が、本番環境に配置する場合は、半固定料金か、従量制課金のクラウドを使うことが多いかと思います。

本番環境へのファイルの配置は、Githubというサービスとgitというツールを使うのが簡単です。昔は手動でFTPでファイルを上げていましたが、gitを使うと、すべてのファイルをひとつのコマンドで、配置することができます。

<ul>
  <li>Github</li>
  <li>git</li>
</ul>

<h3>Webサーバー</h3>

Webサーバーです。よく利用されるWebサーバーです。

インストールは、「Linux名 Webサーバー名 インストール」で検索しましょう。

<ul>
  <li>
    Apache
  </li>
  <li>
    Nginx
  </li>
</ul>

どうやって、WebアプリとWebサーバーを接続するのでしょうか。

それは、リバースプロキシという機能を使って、WebサーバーとWebアプリを接続します。

「Apache リバースプロキシ」「Nginx リバースプロキシ」で、検索してみましょう。

<h3>データベース</h3>

Webアプリでよく使われるデータベースです。

<ul>
  <li>MySQL</li>
  <li>MariaDB</li>
  <li>PostgreSQL</li>
</ul>

インストールは、「Linux名 データベース名 インストール」で検索しましょう。

MySQLとMariaDBは、まぁ同じようなものです。Perlからデータベース接続する場合はDBIとDBD::mysqlが必要です。

PostgreSQLに接続するためにはDBIとDBD::Pgが必要です。

<h3>リモート環境への接続</h3>

開発環境がリモートにある場合は、いったいどうやって接続して、ファイルを更新するのでしょうか?

Windowsでは、そのためのツールがあります。以下のSSH接続できるツールを使うと、リモートサーバでコマンドを送信することができます。

<ul>
  <li>Putty</li>
  <li>TeraTerm</li>
</ul>

Mac OSの場合は、sshコマンドなどが使えるでしょう。

リモードサーバーでの、ファイルの更新はどうするのでしょうか?

以下のツールが使えます。

<ul>
  <li>WinSCP</li>
</ul>

Mac OSの場合は、sshで接続語、vimエディタを使えるでしょう。

<h3>ドメインの取得</h3>

ドメイン取得サービスで、ドメインを取得しましょう。

<ul>
  <li>お名前.com</li>
  <li>ムームードメイン</li>
</ul>

<h3>SSLを使いたい</h3>

Let's Encryptというサービスを使うと、無料でSSL証明書を発行することができます。

<ul>
  <li>Let's Encrypt</li>
</ul>

<h3>まとめ</h3>

PerlのWeb開発の手法は、一度覚えてしまえば、非常に応用が利く技術です。Web技術は、ひとつひとつの難易度は高くないのですが、構成要素が、多く継続的な学習がまさに必要になる分野だと思います。

CGIの次に、現代的なWeb開発の手法を知りたいという方は、ぜひ参考にしてみてください。

今システムがCGIで動いていて、現代的なPerlのWeb開発手法に移行したいという開発マネージャーの方もぜひ参考にしてください。

CGIの課題解決としてPHPが開発されましたが、Perl自体もCGIの課題解決のために独自の発展を遂げています。
